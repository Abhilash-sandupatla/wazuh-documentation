.. Copyright (C) 2021 Wazuh, Inc.

.. _azure_monitoring_activity:

.. meta::
  :description: Discover the numerous ways that Wazuh provides to monitor your Microsoft Azure infrastructure activity.

Monitoring Activity
===================

The `Activity Log <https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs>`_ provides information on subscription level events that have occurred in Azure, with the following relevant information:

- **Administrative Data:** Covers the logging of all creation, update, deletion and action operations performed through the Resource Manager. All actions performed by an user or application using the Resource Manager are interpreted as an operation on a specific resource type. Operations such as write, delete, or action involve logging both the start and the success or failure of that operation in the Administrative category. The Administrative category also includes any changes to the role-based access control of a subscription.

- **Alert Data:** Contains the log of all activations of Azure alerts. For example we will be able to obtain an alert when the percentage of CPU usage of one of the virtual machines of the infrastructure exceeds a certain threshold. Azure provides the option to elaborate customized rules to receive notifications when an event coincides with the rule. When an alert is activated it is logged in the Activity Log.

- **Security Data:** Here we contemplate the log of alerts generated by the Azure Security Center. For example, a log could be related to the execution of suspicious files.

- **Service HealthData:** Covers the log of any service health incident that has occurred in Azure. There are five different types of health events: Action Required, Assisted Recovery, Incident, Maintenance, Information or Security, logged when a subscription resource is affected by the event.

- **Autoscale Data:** Contains the logging of any event related to the autoscale engine based on the autoscale settings in your subscription. Autoscale start events and successful or failed events are logged in this category.

- **Recomendation Data:** Includes Azure Advisor recommendation events.

To monitor the activities of our infrastructure we can use the **Azure Log Analytics REST API** or we can directly access the content of **Azure Storage** accounts. This section explains the two ways to proceed, looking at the steps to follow in the Microsoft Azure portal and using the `azure-logs` module on the Wazuh manager.


.. topic:: Contents

    .. toctree::
       :maxdepth: 2

       log-analytics
       storage