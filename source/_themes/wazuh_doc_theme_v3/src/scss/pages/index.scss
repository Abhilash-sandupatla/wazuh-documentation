/* -----------------------------------------------------------------------------
  Index page
----------------------------------------------------------------------------- */

@import "../inc/variables";
@import "../inc/mixins";
@import "../inc/root";

@import "../components/brand";
@import "../components/mode-switch";
@import "../components/search-box";
@import "../parts/footer";

body {
  margin-top: $indexHeaderHeight;
}

main {
  padding-left: 15px;
  padding-right: 15px;
  min-height: calc(100vh - #{$indexHeaderHeight} - #{$footerHeight});
  padding-top: 60px;

  h1 {
    width: 0;
    height: 0;
    overflow: hidden;
  }

  .toctree-wrapper {
    ul {
      padding: 0;
      list-style: none;
    }
    > ul {
      display: flex;
      flex-wrap: wrap;
      align-items: flex-start;

      .toctree-l1 {
        margin-left: #{$indexIconSize + 10};
        width: calc(33.333% - #{$indexIconSize + 10});
        margin-bottom: 60px;
        position: relative;
        min-height: 133px;
        border-left: 3px solid;

        &.collapsible {
          .toggle {
            display: inline-block;
            left: -3px;
            font-size: 18px;
            font-weight: 700;
            padding: 10px 0;

            &::after {
              content: '';
              display: inline-block;
              width: 24px;
              height: 12px;
              background-repeat: no-repeat;
              background-size: 20px 15px;
              background-position: center;
              margin-left: 7px;
              transform: rotateX(180deg);
            }
          }

          &.collapsed {
            ul {
              position: relative;
            }
            .toggle::after {
              transform: rotateX(0);
            }

            .toctree-l2:nth-of-type(n+#{$IndexMaxShowItems+1}) {
              display: none;
            }
          }
        } 

        a {
          border-left: 3px solid;
          position: relative;
          left: -3px;
          padding-left: 15px;
          display: inline-block;
          line-height: 32px;
          font-weight: 400;

          &:hover {
            text-decoration: none;
          }
        }

        > a {
          font-size: 22px;
          line-height: 22px;
          font-weight: 700;
          padding-bottom: 15px;
        }
      }
      .toctree-l2 {
        position: relative;
      }
    }
  }
}

.loading .toctree-l1 {
  height: 133px;
  overflow-y: hidden;
}

#header {
  height: $indexHeaderHeight;
  display: flex;
  flex-direction: column;
  justify-content: center;

  .navbar-brand {
    font-size: 22px;

    .logo-link.web {
      padding: 0;
      margin-right: 10px;
    }
    .logo-link.docs {
      line-height: 50px;
    }
  }

  .search-box {
    max-width: 850px;
    margin-left: auto;
    margin-right: auto;
  }
}

#right-sidebar {
  position: fixed;
  top: $indexHeaderHeight;
  right: 0;
  width: calc((100% - 1140px)/2);
  min-width: 150px;
  padding-top: 15px;
}

.index footer {
  position: static;
  padding-left: 0;
  padding-right: 0;
}

.index main {
  .toctree-l1 > a::before {
    background-repeat: no-repeat;
    background-size: 60px 60px;
    background-position: center;
    content: '';
    display: block;
    width: 60px;
    height: 60px;
    position: absolute;
    left: -70px;
    top: -7px;
    pointer-events: none;
  }
  /* Getting started */
  [href$="getting-started/index.html"]::before {
    background-image: url('#{$icoPath}index-icons.svg#getting-started');
  }
  /* Installation guide */
  [href$="installation-guide/index.html"]::before {
    background-image: url('#{$icoPath}index-icons.svg#installation-guide');
  }
  /* Upgrade guide */
  [href$="upgrade-guide/index.html"]::before {
    background-image: url('#{$icoPath}index-icons.svg#upgrade-guide');
  }
  /* User manual */
  [href$="user-manual/index.html"]::before {
    background-image: url('#{$icoPath}index-icons.svg#user-manual');
  }
  /* Cloud service */
  [href$="cloud-service/index.html"]::before {
    background-image: url('#{$icoPath}index-icons.svg#cloud-service');
  }
  /* Containers */
  [href$="containers.html"]::before {
    background-image: url('#{$icoPath}index-icons.svg#containers');
  }
  /* Deployment */
  [href$="deployment.html"]::before {
    background-image: url('#{$icoPath}index-icons.svg#deployment');
  }
  /* Compliance */
  [href$="compliance.html"]::before {
    background-image: url('#{$icoPath}index-icons.svg#compliance');
  }
  /* Monitorin with Wazuh */
  [href$="monitoring.html"]::before {
    background-image: url('#{$icoPath}index-icons.svg#monitoring');
  }
  /* Learning Wazuh */
  [href$="learning-wazuh/index.html"]::before {
    background-image: url('#{$icoPath}index-icons.svg#learning');
  }
  /* Release notes */
  [href$="release-notes/index.html"]::before {
    background-image: url('#{$icoPath}index-icons.svg#release-notes');
  }
}

/* Light theme -------------------------------------------------------------- */

body {
  background: $light_ColorCodeBlockBackground;
  color: $light_ColorMainText;

  .toctree-wrapper {
    > ul {
      .toctree-l1 {
        border-left-color: $light_ColorPrimary;
        &.collapsible {
          .toggle {
            color: $light_ColorPrimary;
            border-left-color: $light_ColorCodeBlockBackground;
            &::after {
              background-image: url('#{$icoPath}svg-icons.svg#chevron-blue-lt');
            }
          }
        }
        a {
          color: $light_ColorMainText;
          border-left-color: $light_ColorPrimary;
          &:hover {
            color: $light_ColorPrimaryLighter;
          }
        }
      }
    }
  }
  
  #header {
    background: $light_ColorIndexHeaderBackground;
    .search-box {
      background: $light_ColorIndexHeaderBackground;
    }
    .form-control {
      background: $light_ColorIndexHeaderBackground;
    }
  }
}

/* Dark- theme -------------------------------------------------------------- */

.dark-theme {
  background: $dark_ColorBaseSpace;
  color: $dark_ColorMainText;

  .toctree-wrapper {
    > ul {
      .toctree-l1 {
        border-left-color: $dark_ColorHighlightInlineText;
        &.collapsible {
          .toggle {
            color: $dark_ColorPrimary;
            border-left-color: $dark_ColorBaseSpace;
            &::after {
              background-image: url('#{$icoPath}svg-icons.svg#chevron-blue-dt');
            }
          }
        }
        a {
          color: $dark_ColorMainText;
          border-left-color: $dark_ColorHighlightInlineText;
          &:hover {
            color: $dark_ColorPrimaryLighter;
          }
        }
      }
    }
  }
  
  #header {
    background: $dark_ColorIndexHeaderBackground;
    .search-box {
      background: $dark_ColorIndexHeaderBackground;
    }
    .form-control {
      background: $dark_ColorIndexHeaderBackground;
    }
  }
}
